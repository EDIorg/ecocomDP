<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Read published data — read_data • ecocomDP</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Read published data — read_data" />
<meta property="og:description" content="Read published data" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ecocomDP</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/create.html">Create</a>
    </li>
    <li>
      <a href="../articles/use.html">Use</a>
    </li>
    <li>
      <a href="../articles/convert.html">Convert</a>
    </li>
    <li>
      <a href="../articles/model_overview.html">Model Overview</a>
    </li>
    <li>
      <a href="../articles/shared_practices_create.html">Shared Practices (Create)</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/EDIorg/ecocomDP/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Read published data</h1>
    <small class="dont-index">Source: <a href='https://github.com/EDIorg/ecocomDP/blob/master/R/read_data.R'><code>R/read_data.R</code></a></small>
    <div class="hidden name"><code>read_data.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Read published data</p>
    </div>

    <pre class="usage"><span class='fu'>read_data</span><span class='op'>(</span>
  id <span class='op'>=</span> <span class='cn'>NULL</span>,
  parse_datetime <span class='op'>=</span> <span class='cn'>TRUE</span>,
  unique_keys <span class='op'>=</span> <span class='cn'>FALSE</span>,
  site <span class='op'>=</span> <span class='st'>"all"</span>,
  startdate <span class='op'>=</span> <span class='cn'>NA</span>,
  enddate <span class='op'>=</span> <span class='cn'>NA</span>,
  package <span class='op'>=</span> <span class='st'>"basic"</span>,
  check.size <span class='op'>=</span> <span class='cn'>FALSE</span>,
  nCores <span class='op'>=</span> <span class='fl'>1</span>,
  forceParallel <span class='op'>=</span> <span class='cn'>FALSE</span>,
  token <span class='op'>=</span> <span class='cn'>NA</span>,
  neon.data.save.dir <span class='op'>=</span> <span class='cn'>NULL</span>,
  neon.data.read.path <span class='op'>=</span> <span class='cn'>NULL</span>,
  <span class='va'>...</span>,
  from <span class='op'>=</span> <span class='cn'>NULL</span>,
  format <span class='op'>=</span> <span class='st'>"new"</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>id</th>
      <td><p>(character) Identifier of dataset to read. Identifiers are listed in the "id" column of the <code><a href='search_data.html'>search_data()</a></code> output. Older versions of datasets can be read, but a warning is issued.</p></td>
    </tr>
    <tr>
      <th>parse_datetime</th>
      <td><p>(logical) Parse datetime values if TRUE, otherwise return as character strings.</p></td>
    </tr>
    <tr>
      <th>unique_keys</th>
      <td><p>(logical) Whether to create globally unique primary keys (and associated foreign keys). Useful in maintaining referential integrity when working with multiple datasets. If TRUE, <code>id</code> is appended to each table's primary key and associated foreign key. Default is FALSE.</p></td>
    </tr>
    <tr>
      <th>site</th>
      <td><p>(character) For NEON data, a character vector of site codes to filter data on. Sites are listed in the "sites" column of the <code><a href='search_data.html'>search_data()</a></code> output. Defaults to "all", meaning all sites.</p></td>
    </tr>
    <tr>
      <th>startdate</th>
      <td><p>(character) For NEON data, the start date to filter on in the form YYYY-MM. Defaults to NA, meaning all available dates.</p></td>
    </tr>
    <tr>
      <th>enddate</th>
      <td><p>(character) For NEON data, the end date to filter on in the form YYYY-MM. Defaults to NA, meaning all available dates.</p></td>
    </tr>
    <tr>
      <th>package</th>
      <td><p>(character) For NEON data, either 'basic' or 'expanded', indicating which data package to download. Defaults to basic.</p></td>
    </tr>
    <tr>
      <th>check.size</th>
      <td><p>(logical) For NEON data, should the user approve the total file size before downloading? Defaults to FALSE.</p></td>
    </tr>
    <tr>
      <th>nCores</th>
      <td><p>(integer) For NEON data, the number of cores to parallelize the stacking procedure. Defaults to 1.</p></td>
    </tr>
    <tr>
      <th>forceParallel</th>
      <td><p>(logical) For NEON data, if the data volume to be processed does not meet minimum requirements to run in parallel, this overrides. Defaults to FALSE.</p></td>
    </tr>
    <tr>
      <th>token</th>
      <td><p>(character) For NEON data, a user specific API token (generated within neon.datascience user accounts).</p></td>
    </tr>
    <tr>
      <th>neon.data.save.dir</th>
      <td><p>(character) For NEON data, an optional and experimental argument (i.e. may not be supported in future releases), indicating the directory where NEON source data should be saved upon download from the NEON API. Data are downloaded using <code><a href='https://rdrr.io/pkg/neonUtilities/man/loadByProduct.html'>neonUtilities::loadByProduct()</a></code> and saved in this directory as an .rds file. The filename will follow the format &lt;NEON data product ID&gt;_&lt;timestamp&gt;.rds</p></td>
    </tr>
    <tr>
      <th>neon.data.read.path</th>
      <td><p>(character) For NEON data, an optional and experimental argument (i.e. may not be supported in future releases), defining a path to read in an .rds file of 'stacked NEON data' from <code><a href='https://rdrr.io/pkg/neonUtilities/man/loadByProduct.html'>neonUtilities::loadByProduct()</a></code>. See details below for more information.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>For NEON data, other arguments to <code><a href='https://rdrr.io/pkg/neonUtilities/man/loadByProduct.html'>neonUtilities::loadByProduct()</a></code></p></td>
    </tr>
    <tr>
      <th>from</th>
      <td><p>(character) Full path of file to be read (if .rds), or path to directory containing saved datasets (if .csv).</p></td>
    </tr>
    <tr>
      <th>format</th>
      <td><p>(character) Format of returned object, which can be: "new" (the new implementation) or "old" (the original implementation; deprecated). In the new format, the top most level of nesting containing the "id" field has been moved to the same level as the "tables", "metadata", and "validation_issues" fields.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>(list) A dataset with the structure:</p><ul>
<li><p>id - Dataset identifier</p></li>
<li><p>metadata - List of info about the dataset. NOTE: This object is underdevelopment and content may change in future releases.</p></li>
<li><p>tables - List of dataset tables as data.frames.</p></li>
<li><p>validation_issues - List of validation issues. If the dataset fails any validation checks, then descriptions of each issue are listed here.</p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Validation checks are applied to each dataset ensuring it complies with the ecocomDP model. A warning is issued when any validation checks fail. All datasets are returned, even if they fail validation.</p>    
<p>Column classes are coerced to those defined in the ecocomDP specification.</p>    
<p>Validation happens each time files are read, from source APIs or local environments.</p>    
<p>Details for <code>read_data()</code> function regarding NEON data: Using this function to read data with an <code>id</code> that begins with "neon.ecocomdp" will result in a query to download NEON data from the NEON Data Portal API using <code><a href='https://rdrr.io/pkg/neonUtilities/man/loadByProduct.html'>neonUtilities::loadByProduct()</a></code>. If a query includes provisional data (or if you are not sure if the query includes provisional data), we recommend saving a copy of the data in the original format provided by NEON in addition to the derived ecocomDP data package. To do this, provide a directory path using the <code>neon.data.read.path</code> argument. For example, the query <code>my_ecocomdp_data &lt;- read_data(id = "neon.ecocomdp.10022.001.001", neon.data.save.dir = "my_neon_data")</code> will download the data for NEON Data Product ID DP1.10022.001 (ground beetles in pitfall traps) and convert it to the ecocomDP data model. In doing so, a copy of the original NEON download will be saved in the directory "my_ neon_data with the filename 
    "DP1.10022.001_&lt;timestamp&gt;.RDS" and the derived data package in the ecocomDP format will be stored in your R environment in an object named "my_ecocomdp_data". Further, if you wish to reload a previously downloaded NEON dataset into the ecocomDP format, you can do so using <code>my_ecocomdp_data &lt;- read_data(id = "neon.ecocomdp.10022.001.001", neon.data.read.path = 
    "my_neon_data/DP1.10022.001_&lt;timestamp&gt;.RDS")</code></p>    
<p>Provisional NEON data. Despite NEON's controlled data entry, at times, errors are found in published data; for example, an analytical lab may adjust its calibration curve and re-calculate past analyses, or field scientists may discover a past misidentification. In these cases, Level 0 data are edited and the data are re-processed to Level 1 and re-published. Published data files include a time stamp in the file name; a new time stamp indicates data have been re-published and may contain differences from previously published data. Data are subject to re-processing at any time during an initial provisional period; data releases are never re-processed. All records downloaded from the NEON API will have a "release" field. For any provisional record, the value of this field will be "PROVISIONAL", otherwise, this field will have a value indicating the version of the release to which the record belongs. More details can be found at https://www.neonscience.org/data-samples/data-management/data-revisions-releases.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>This function may not work between 01:00 - 03:00 UTC on Wednesdays due to regular maintenance of the EDI Data Repository.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'># Read from EDI</span>
<span class='va'>dataset</span> <span class='op'>&lt;-</span> <span class='fu'>read_data</span><span class='op'>(</span><span class='st'>"edi.193.5"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>dataset</span>, max.level <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>

<span class='co'># Read from NEON (full dataset)</span>
<span class='va'>dataset</span> <span class='op'>&lt;-</span> <span class='fu'>read_data</span><span class='op'>(</span><span class='st'>"neon.ecocomdp.20120.001.001"</span><span class='op'>)</span>

<span class='co'># Read from NEON with filters (partial dataset)</span>
<span class='va'>dataset</span> <span class='op'>&lt;-</span> <span class='fu'>read_data</span><span class='op'>(</span>
 id <span class='op'>=</span> <span class='st'>"neon.ecocomdp.20120.001.001"</span>, 
 site <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"COMO"</span>, <span class='st'>"LECO"</span>, <span class='st'>"SUGG"</span><span class='op'>)</span>,
 startdate <span class='op'>=</span> <span class='st'>"2017-06"</span>, 
 enddate <span class='op'>=</span> <span class='st'>"2019-09"</span>,
 check.size <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='co'># Read with datetimes as character</span>
<span class='va'>dataset</span> <span class='op'>&lt;-</span> <span class='fu'>read_data</span><span class='op'>(</span><span class='st'>"edi.193.5"</span>, parse_datetime <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/character.html'>is.character</a></span><span class='op'>(</span><span class='va'>dataset</span><span class='op'>$</span><span class='va'>tables</span><span class='op'>$</span><span class='va'>observation</span><span class='op'>$</span><span class='va'>datetime</span><span class='op'>)</span>

<span class='co'># Read from saved .rds</span>
<span class='fu'><a href='save_data.html'>save_data</a></span><span class='op'>(</span><span class='va'>dataset</span>, <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>dataset</span> <span class='op'>&lt;-</span> <span class='fu'>read_data</span><span class='op'>(</span>from <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='st'>"/dataset.rds"</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># Read from saved .csv</span>
<span class='fu'><a href='save_data.html'>save_data</a></span><span class='op'>(</span><span class='va'>dataset</span>, <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span>, type <span class='op'>=</span> <span class='st'>".csv"</span><span class='op'>)</span><span class='co'># Save as .csv</span>
<span class='va'>dataset</span> <span class='op'>&lt;-</span> <span class='fu'>read_data</span><span class='op'>(</span>from <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>}</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Colin Smith, Eric Sokol, Margaret O'Brien.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


