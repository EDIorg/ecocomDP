<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Validate a dataset against the ecocomDP model — validate_data • ecocomDP</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Validate a dataset against the ecocomDP model — validate_data" />
<meta property="og:description" content="Validate a dataset against the ecocomDP model" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ecocomDP</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/create.html">Create</a>
    </li>
    <li>
      <a href="../articles/use.html">Use</a>
    </li>
    <li>
      <a href="../articles/convert.html">Convert</a>
    </li>
    <li>
      <a href="../articles/shared_practices.html">Shared Practices</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/EDIorg/ecocomDP/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Validate a dataset against the ecocomDP model</h1>
    <small class="dont-index">Source: <a href='https://github.com/EDIorg/ecocomDP/blob/master/R/validate_data.R'><code>R/validate_data.R</code></a></small>
    <div class="hidden name"><code>validate_data.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Validate a dataset against the ecocomDP model</p>
    </div>

    <pre class="usage"><span class='fu'>validate_data</span><span class='op'>(</span>dataset <span class='op'>=</span> <span class='cn'>NULL</span>, path <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>dataset</th>
      <td><p>(list) A dataset of the structure returned by <code><a href='read_data.html'>read_data()</a></code>.</p></td>
    </tr>
    <tr>
      <th>path</th>
      <td><p>(character) Path to a directory containing ecocomDP tables as files.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>(list) If any checks fail, then a list of validation issues are returned along with a warning. If no issues are found then NULL is returned.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Validation checks:</p><ul>
<li><p>File names - File names are the ecocomDP table names.</p></li>
<li><p>Table presence - Required tables are present.</p></li>
<li><p>Column names - Column names of all tables match the model.</p></li>
<li><p>Column presence - Required columns are present.</p></li>
<li><p>Column classes - Column classes match the model specification.</p></li>
<li><p>Datetime format - Date and time formats follow the model specification.</p></li>
<li><p>Primary keys - Primary keys of tables are unique.</p></li>
<li><p>Composite keys - Composite keys (unique constraints) of each table are unique.</p></li>
<li><p>Referential integrity - Foreign keys have a corresponding primary key.</p></li>
<li><p>Coordinate format - Values are in decimal degree format.</p></li>
<li><p>Coordinate range - Values are within -90 to 90 and -180 to 180.</p></li>
<li><p>Elevation - Values are less than Mount Everest (8848 m) and greater than Mariana Trench (-10984 m).</p></li>
<li><p>Variable mapping - variable_name is in table_name.</p></li>
</ul>

    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>This function is used by ecocomDP creators (to ensure what has been created is valid), maintainers (to improve the quality of archived ecocomDP datasets), and users (to ensure the data being used is free of error).</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Write a set of ecocomDP tables to file for validation</span>
<span class='va'>mydir</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='st'>"/dataset"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/files2.html'>dir.create</a></span><span class='op'>(</span><span class='va'>mydir</span><span class='op'>)</span>
<span class='fu'><a href='write_tables.html'>write_tables</a></span><span class='op'>(</span>
  path <span class='op'>=</span> <span class='va'>mydir</span>,
  observation <span class='op'>=</span> <span class='va'>ants_L1</span><span class='op'>$</span><span class='va'>edi.193.4</span><span class='op'>$</span><span class='va'>tables</span><span class='op'>$</span><span class='va'>observation</span>, 
  observation_ancillary <span class='op'>=</span> <span class='va'>ants_L1</span><span class='op'>$</span><span class='va'>edi.193.4</span><span class='op'>$</span><span class='va'>tables</span><span class='op'>$</span><span class='va'>observation_ancillary</span>,
  location <span class='op'>=</span> <span class='va'>ants_L1</span><span class='op'>$</span><span class='va'>edi.193.4</span><span class='op'>$</span><span class='va'>tables</span><span class='op'>$</span><span class='va'>location</span>,
  location_ancillary <span class='op'>=</span> <span class='va'>ants_L1</span><span class='op'>$</span><span class='va'>edi.193.4</span><span class='op'>$</span><span class='va'>tables</span><span class='op'>$</span><span class='va'>location_ancillary</span>,
  taxon <span class='op'>=</span> <span class='va'>ants_L1</span><span class='op'>$</span><span class='va'>edi.193.4</span><span class='op'>$</span><span class='va'>tables</span><span class='op'>$</span><span class='va'>taxon</span>,
  taxon_ancillary <span class='op'>=</span> <span class='va'>ants_L1</span><span class='op'>$</span><span class='va'>edi.193.4</span><span class='op'>$</span><span class='va'>tables</span><span class='op'>$</span><span class='va'>taxon_ancillary</span>,
  dataset_summary <span class='op'>=</span> <span class='va'>ants_L1</span><span class='op'>$</span><span class='va'>edi.193.4</span><span class='op'>$</span><span class='va'>tables</span><span class='op'>$</span><span class='va'>dataset_summary</span>,
  variable_mapping <span class='op'>=</span> <span class='va'>ants_L1</span><span class='op'>$</span><span class='va'>edi.193.4</span><span class='op'>$</span><span class='va'>tables</span><span class='op'>$</span><span class='va'>variable_mapping</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Writing tables to file:</span></div><div class='output co'>#&gt; <span class='message'>  observation</span></div><div class='output co'>#&gt; <span class='message'>  location</span></div><div class='output co'>#&gt; <span class='message'>  taxon</span></div><div class='output co'>#&gt; <span class='message'>  dataset_summary</span></div><div class='output co'>#&gt; <span class='message'>  observation_ancillary</span></div><div class='output co'>#&gt; <span class='message'>  location_ancillary</span></div><div class='output co'>#&gt; <span class='message'>  taxon_ancillary</span></div><div class='output co'>#&gt; <span class='message'>  variable_mapping</span></div><div class='input'>
<span class='co'># Validate</span>
<span class='fu'>validate_data</span><span class='op'>(</span>path <span class='op'>=</span> <span class='va'>mydir</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>File names</span></div><div class='output co'>#&gt; <span class='message'>Validating dataset:</span></div><div class='output co'>#&gt; <span class='message'>  Required tables</span></div><div class='output co'>#&gt; <span class='message'>  Column names</span></div><div class='output co'>#&gt; <span class='message'>  Required columns</span></div><div class='output co'>#&gt; <span class='message'>  Column classes</span></div><div class='output co'>#&gt; <span class='message'>  Datetime formats</span></div><div class='output co'>#&gt; <span class='message'>  Primary keys</span></div><div class='output co'>#&gt; <span class='message'>  Composite keys</span></div><div class='output co'>#&gt; <span class='message'>  Referential integrity</span></div><div class='output co'>#&gt; <span class='message'>  Latitude and longitude format</span></div><div class='output co'>#&gt; <span class='message'>  Latitude and longitude range</span></div><div class='output co'>#&gt; <span class='message'>  Elevation</span></div><div class='output co'>#&gt; <span class='message'>  variable_mapping</span></div><div class='output co'>#&gt; list()</div><div class='input'>
<span class='co'># Clean up</span>
<span class='fu'><a href='https://rdrr.io/r/base/unlink.html'>unlink</a></span><span class='op'>(</span><span class='va'>mydir</span>, recursive <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Colin Smith, Eric Sokol.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


