<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Validate tables against the model — validate_data • ecocomDP</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Validate tables against the model — validate_data"><meta property="og:description" content="Validate tables against the model"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ecocomDP</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/create.html">Create</a>
    </li>
    <li>
      <a href="../articles/use.html">Use</a>
    </li>
    <li>
      <a href="../articles/convert.html">Convert</a>
    </li>
    <li>
      <a href="../articles/model_overview.html">Model Overview</a>
    </li>
    <li>
      <a href="../articles/shared_practices_create.html">Shared Practices (Create)</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/EDIorg/ecocomDP/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Validate tables against the model</h1>
    <small class="dont-index">Source: <a href="https://github.com/EDIorg/ecocomDP/blob/HEAD/R/validate_data.R" class="external-link"><code>R/validate_data.R</code></a></small>
    <div class="hidden name"><code>validate_data.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Validate tables against the model</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">validate_data</span><span class="op">(</span>dataset <span class="op">=</span> <span class="cn">NULL</span>, path <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>dataset</dt>
<dd><p>(list) A dataset of the structure returned by <code><a href="read_data.html">read_data()</a></code>.</p></dd>
<dt>path</dt>
<dd><p>(character) Path to a directory containing ecocomDP tables as files.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>(list) If any checks fail, then a list of validation issues are returned along with a warning. If no issues are found then NULL is returned.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Validation checks:</p><ul><li><p>File names - File names are the ecocomDP table names.</p></li>
<li><p>Table presence - Required tables are present.</p></li>
<li><p>Column names - Column names of all tables match the model.</p></li>
<li><p>Column presence - Required columns are present.</p></li>
<li><p>Column classes - Column classes match the model specification.</p></li>
<li><p>Datetime format - Date and time formats follow the model specification.</p></li>
<li><p>Primary keys - Primary keys of tables are unique.</p></li>
<li><p>Composite keys - Composite keys (unique constraints) of each table are unique.</p></li>
<li><p>Referential integrity - Foreign keys have a corresponding primary key.</p></li>
<li><p>Coordinate format - Values are in decimal degree format.</p></li>
<li><p>Coordinate range - Values are within -90 to 90 and -180 to 180.</p></li>
<li><p>Elevation - Values are less than Mount Everest (8848 m) and greater than Mariana Trench (-10984 m).</p></li>
<li><p>Variable mapping - variable_name is in table_name.</p></li>
<li><p>Mapped_id - values in mapped_id are valid URIs</p></li>
</ul></div>
    <div id="note">
    <h2>Note</h2>
    <p>This function is used by ecocomDP creators (to ensure what has been created is valid), maintainers (to improve the quality of archived ecocomDP datasets), and users (to ensure the data being used is free of error).</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="co"># Write a set of ecocomDP tables to file for validation</span></span>
<span class="r-in"><span class="va">mydir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/dataset"</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">mydir</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="write_tables.html">write_tables</a></span><span class="op">(</span></span>
<span class="r-in">  path <span class="op">=</span> <span class="va">mydir</span>,</span>
<span class="r-in">  observation <span class="op">=</span> <span class="va">ants_L1</span><span class="op">$</span><span class="va">tables</span><span class="op">$</span><span class="va">observation</span>, </span>
<span class="r-in">  observation_ancillary <span class="op">=</span> <span class="va">ants_L1</span><span class="op">$</span><span class="va">tables</span><span class="op">$</span><span class="va">observation_ancillary</span>,</span>
<span class="r-in">  location <span class="op">=</span> <span class="va">ants_L1</span><span class="op">$</span><span class="va">tables</span><span class="op">$</span><span class="va">location</span>,</span>
<span class="r-in">  location_ancillary <span class="op">=</span> <span class="va">ants_L1</span><span class="op">$</span><span class="va">tables</span><span class="op">$</span><span class="va">location_ancillary</span>,</span>
<span class="r-in">  taxon <span class="op">=</span> <span class="va">ants_L1</span><span class="op">$</span><span class="va">tables</span><span class="op">$</span><span class="va">taxon</span>,</span>
<span class="r-in">  taxon_ancillary <span class="op">=</span> <span class="va">ants_L1</span><span class="op">$</span><span class="va">tables</span><span class="op">$</span><span class="va">taxon_ancillary</span>,</span>
<span class="r-in">  dataset_summary <span class="op">=</span> <span class="va">ants_L1</span><span class="op">$</span><span class="va">tables</span><span class="op">$</span><span class="va">dataset_summary</span>,</span>
<span class="r-in">  variable_mapping <span class="op">=</span> <span class="va">ants_L1</span><span class="op">$</span><span class="va">tables</span><span class="op">$</span><span class="va">variable_mapping</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Validate</span></span>
<span class="r-in"><span class="fu">validate_data</span><span class="op">(</span>path <span class="op">=</span> <span class="va">mydir</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Clean up</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">mydir</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Colin Smith, Eric Sokol, Margaret O’Brien.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

